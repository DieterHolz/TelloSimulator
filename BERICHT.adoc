:imagesdir: assets
:toc: macro

= 20FS_IMVS08: Tello Simulator

[.text-center]
*Implementierung eines Simulators für die Tello Drohne*
[.text-center]
image::fhnw_ht_10mm.jpg[width=400]
[.text-center]
IP5 im Studiengang Informatik mit Vertiefung in Design und Management an der Fachhochschule Nordwestschweiz +
v0.1 +
Brugg, 6. Oktober 2020

[.text-center]
*Autoren* +
Daniel Obrist +
Severin Peyer +


[.text-center]
*Auftraggeber* +
Fachhochschule Nordwestschweiz FHNW +
vertreten durch Dieter Holz und Barbara Scheuner +
Bahnhofstrasse 6 +
5210 Windisch

[.text-center]
*Betreuer* +
Dr. Dieter Holz +
Dr. Barbara Scheuner

'''
[discrete]
== Impressum

:toc-title: Inhaltsverzeichnis
toc::[]

== Management Summary
== Einleitung
=== Ausgangslage
Im Workshop-Modul 2 (Programmieren von Minidrohnen und "intelligente Kleidung") der Fachhochschule Nordwestschweiz (FHNW) wird die Tello EDU von Ryze Robotics <<telloedu>> (nachfolgend: Tello-Drohne) eingesetzt. Dabei werden in Teams von durchschnittlich 4 Mitgliedern Applikationen zur Steuerung der Drohne entwickelt. Jedem Team steht dabei eine Tello-Drohne zur Verfügung.

=== Problem
Es hat sich gezeigt, dass die Drohne sehr schnell zu einem Engpass führt, da insbesondere im frühen Entwicklungsstadium viel mit der Drohne experimentiert werden muss. Dadurch verzögert sich der Projektfortschritt. Des Weiteren ist es auch bereits zu mehreren Missgeschicken mit der Drohne gekommen. Beispielsweise wurde vergessen ein Stopp-Signal einzubauen, weswegen die Drohne in eine Wand geflogen und kaputt gegangen ist.

=== Anforderungen
Um die beiden Probleme zu minimieren, repsektive eleminieren, soll ein Simulator entwickelt werden, welcher sich möglichst gleich verhält wie die echte Tello-Drohne. Dieser soll rein software-technisch umgesetzt werden, damit nicht wieder die Abhängigkeit von einem technischen Gerät entsteht. Der Simulator muss die Programmierschnittstelle des Tello SDK 2.0 anbieten. Folgende Anforderungen wurden definiert:

* Der Simulator kann Kommandos des Operators entgegennehmen und eine Response senden
* Die virtuelle Drohne setzt alle Control-, Read- und Set-Commands visuell realitätsgetrau um
* Der Simulator kann einen Status auf einem separaten Port an den Operator senden
* Der Simulator kann einen Videostream aus der Sicht der Drohne an den Operator senden
* Error-Handling (ungültige Befehle, ungültige Parameter)

Für das Extended Product, haben wir folgende Kann-Ziele definiert:

* Per UI kann eine Raumgrösse eingegeben werden (LxBxH) und eine Startposition der Drohne (x, y und Start am Boden)
* Der Simulator kann mit mehreren Drohnen (Drohnenschwärme) umgehen


=== Lösung
=== Zielpublikum
== Theoretischer Teil
=== Beschreibung der Anwendungsdomäne
=== Beschreibung der verwendeten Methoden
== Praktischer Teil
=== Use-Cases
=== Architektur

Hier wird die Software-Architektur des Simulators beschrieben. Die nachfolgende Grafik bietet einen Überblick der
wichtigsten Klassen. Anschliessend werden diese Klassen und deren Funktionen genauer beschrieben.

<Diagramm mit den wichtigsten Klassen>

==== Frontend
Das User-Interface des Simulators ist mit den typischen JavaFX-Bausteinen aufgebaut. Die Benutzerfreundlichkeit wurde
bei der Gestaltung nicht speziell beachtet und hat bestimmt noch ein gewisses Verbesserungspotenzial. Als zukünftige
Weiterentwicklung könnte man bestimmt noch einen Sprint in das User-Experience stecken. Da sich unser Projekt jedoch auf
die Grundfunktionalität fokussierte, haben wir nicht viele Ressourcen in die Usabilty investiert.

===== SimulatorPane
Die SimulatorPane ist die übergeordnete BorderPane, welche alle anderen JavaFX-Nodes enthält. Links befinden sich die
SimulatorControls zum Setzen und Beobachten von Simulator- und Drohnen-Parametern. Auf der rechten Seite sind die
NetworkControls, wo alle nötigen Informationen zum Verbindungsaufbau mit dem Simulator angezeigt werden. Unten findet
der User eine interaktive LogBox, welche dem Debugging dient. Und in der Mitte befindet sich die Simulator3DScene, in
welcher die 3D-Welt und die virtuelle Drohne gerendert werden. <Links zum JavaDoc nicht vergessen>

<Screenshot des gesamten GUI>

====== SimulatorControls
<Kurze Beschreibung der SimulatorControls Komponente und deren Funktion>

====== NetworkControls
<Kurze Beschreibung der NetworkControls Komponente und deren Funktion>

====== LogBox
<Kurze Beschreibung der LogBox Komponente und deren Funktion>

====== Simulator3DScene
<Kurze Beschreibung der Simulator3DScene Komponente und deren Funktion>

==== Backend
===== CommandConnection

===== StateConnection

===== CommandHandler
Die Aufgabe der CommandHandler-Klasse <Link zu JavaDoc> ist es, mit den verschiedenen Commands umzugehen. Der
CommandHandler splittet die über die CommandConnection empfangenen Command-Strings auf und extrahiert die enthaltenen
Parameter. Anschliessend wird über ein grosses Switch-Statement jedes Command validiert und zu den entsprechenden
Methoden im DroneController weitergeleitet.

===== DroneController

===== DroneModel



=== UDP-Schnittstelle

Wie bei der Tello-Drohne findet auch beim Simulator die gesamte Kommunikation über das UDP-Netzwerkprotokoll statt.
Um den Verbindungsaufbau mit dem Simulator ähnlich wie mit der Tello-Drohne zu gestalten, haben wir die
Schnittstelle so weit wie möglich gleich gestaltet, wie sie von der Tello-Drohne implementiert wird. Als Grundlage
diente uns hierbei der offizielle Tello SDK 2.0 User Guide <<sdk2.0userguide>>. Dazu führten wir eigene Tests mit der
Tello-Drohne durch, welche die teilweise lückenhafte Dokumentation im User Guide ergänzten.

==== Die UDP-Schnittstelle der Tello-Drohne



=== Programmierschnittstelle

In diesem Kapitel wird die Programmierschnittstelle des Simulators beschrieben. Dazu gehören alle Commands, welche vom
Simulator unterstützt werden.

=== Mögliche Weiterentwicklungen

Obwohl der Simulator in seinem jetzigen Zustand die Grundanforderungen abdeckt, gibt es noch diverse Funktionen,
die aus Ressourcengründen im Backlog unseres Projekts geblieben sind.

==== Video-Stream


==== <Weitere Features die wir nicht umsetzen konnten>

== Fazit
== Danksagung
== Referenzen
=== Literaturverzeichnis
[bibliography]
- [[[telloedu,1]]] https://www.ryzerobotics.com/tello-edu +
- [[[sdk2.0userguide,2]]] https://dl-cdn.ryzerobotics.com/downloads/Tello/Tello%20SDK%202.0%20User%20Guide.pdf +

=== Abbildungsverzeichnis
== Ehrlichkeitserklärung
== Anhang
=== Installationsanleitung Tello Simulator
=== Operator-Programm mit der Simulator-API verbinden
=== Benutzerhandbuch Tello Simulator
